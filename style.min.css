:root{--bg-image:url('assets/background.png')}body{margin:0;font-family:'Merriweather',serif;background-color:#0d2538;background-image:var(--bg-image);background-repeat:no-repeat;background-position:center center;background-attachment:fixed;background-size:cover;color:#f5f5f5;min-height:100vh;display:flex;flex-direction:column}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,var(--bg-dimmer,0));pointer-events:none;z-index:-1}.nav-bar{display:flex;flex-wrap:nowrap;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;background:linear-gradient(90deg,#0d2538,#0a2e47,#0d2538);box-shadow:0 2px 4px rgba(0,0,0,0.5);padding:0.5rem;gap:0.5rem;justify-content:flex-start;position:sticky;top:0;z-index:10}.nav-bar button{background:#0f3d5f;border:none;color:#f5f5f5;padding:0.5rem 0.75rem;border-radius:4px;cursor:pointer;font-size:0.9rem;flex:0 0 auto}.nav-bar button.active{background:#136eb8}.nav-bar button:hover{background:#195fa5}.qi-progress-container{margin-top:0.5rem;margin-bottom:1rem}.progress-bar{width:100%;height:12px;background:rgba(255,255,255,0.2);border-radius:6px;overflow:hidden}.progress-inner{height:100%;background:#136eb8;width:0%;transition:width 0.3s ease}.progress-text{font-size:0.8rem;margin-top:0.25rem;color:#e6f2f9}.toggle-hide-locked{display:block;margin:0.5rem 0;font-size:0.9rem}.auto-send-toggle{margin:0.5rem 0;list-style:none;padding-left:0;margin-left:32px;position:relative}.auto-send-toggle::before{content:none}.auto-send-toggle label{display:flex;align-items:center;gap:0.25rem;font-weight:normal}.codex-toc{margin-bottom:0.5rem;display:flex;flex-wrap:nowrap;overflow-x:auto;gap:0.5rem;position:sticky;top:4rem;background:rgba(0,0,0,0.6);padding:0.25rem 0.5rem;z-index:3}.codex-toc a{color:#88c6f2;text-decoration:none;font-size:0.75rem;cursor:pointer;background:rgba(255,255,255,0.15);padding:0.25rem 0.5rem;border-radius:10px;display:inline-block;white-space:nowrap}.codex-toc a:hover{background:rgba(255,255,255,0.25)}.codex-search{width:100%;padding:0.3rem 0.5rem;margin-bottom:0.5rem;border:1px solid rgba(255,255,255,0.3);border-radius:4px;background:rgba(0,0,0,0.5);color:#e6f2f9}.codex-search::placeholder{color:#88c6f2}.codex-search-wrapper{position:relative;margin-bottom:0.5rem;z-index:4}.codex-clear-btn{position:absolute;right:0.5rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#88c6f2;font-size:1.6rem;padding:0;cursor:pointer;display:none;z-index:5;width:1.6rem;height:1.6rem;display:flex;align-items:center;justify-content:center}.story-chapters .card{margin-bottom:1rem}#story-intro a{color:#88c6f2;text-decoration:underline}.story-choices{display:flex;flex-direction:column;gap:0.5rem;margin-top:0.5rem}.story-choice-btn{background:#136eb8;color:#f5f5f5;border:none;border-radius:4px;padding:0.4rem 0.6rem;cursor:pointer;font-size:0.85rem;text-align:left}.story-choice-btn:hover{background:#195fa5}.codex-clear-btn:hover{color:#a0d4f5}.placeholder{font-style:italic;color:#cccccc;margin-top:0.5rem}.mission-card{background:rgba(0,0,0,0.5);padding:0.75rem;border-radius:6px;margin-top:1rem}.upgrade-card{background:rgba(0,0,0,0.5);padding:0.75rem;border-radius:6px;margin-top:1rem}.mission-note{margin-top:-0.5rem;font-size:0.85rem;color:#a0c9e8;font-style:italic}.screen{padding:1rem;margin-top:var(--stats-height,0px)}.screen.hidden{display:none}#screen-upgrades{overflow-x:auto}.primary-btn{background:linear-gradient(90deg,#1e5799,#2989d8,#207cca);color:white;border:none;padding:0.75rem 1.25rem;border-radius:6px;font-size:1rem;cursor:pointer;margin-top:1rem;box-shadow:0 2px 4px rgba(0,0,0,0.5)}.stats-display{margin-top:1rem;background:rgba(0,0,0,0.5);color:#e6f2f9;padding:0.75rem;border-radius:6px}.list{display:flex;flex-direction:column;gap:0.5rem;margin-top:1rem}.list .entry{background:rgba(0,0,0,0.5);padding:0.75rem;border-radius:6px;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:0.5rem;box-shadow:0 2px 4px rgba(0,0,0,0.3)}.list .entry > div:nth-child(2){min-width:0}.list .entry button{flex-shrink:0;white-space:nowrap}.list .entry:hover{background:rgba(255,255,255,0.1)}.entry-icon{width:24px;height:24px;display:flex;align-items:center;justify-content:center}.entry-icon img{width:24px;height:24px;filter:invert(1);opacity:0.85}.disciple-avatar{width:32px;height:32px;filter:none;opacity:1;border-radius:50%}.list .entry button{background:#0f3d5f;color:#f5f5f5;border:none;padding:0.5rem 0.75rem;border-radius:4px;font-size:0.8rem;cursor:pointer;min-width:5rem}.multiplier-selector{display:flex;align-items:center;gap:0.5rem;margin:0.5rem 0}.multiplier-selector button{background:#0f3d5f;color:#f5f5f5;border:none;padding:0.25rem 0.5rem;border-radius:4px;cursor:pointer}.multiplier-selector button.active{background:#136eb8}.toast{position:fixed;bottom:1rem;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.85);color:#f5f5f5;padding:0.75rem 1rem;border-radius:4px;z-index:100;font-size:0.9rem}.hidden{display:none !important}.settings-section{margin-top:1rem;background:rgba(0,0,0,0.5);padding:0.75rem;border-radius:6px}.settings-section label{display:block;margin-bottom:0.5rem}.danger-btn{background:#b00020;color:white;border:none;padding:0.5rem 1rem;border-radius:4px;cursor:pointer;margin-top:1rem}.danger-btn:hover{background:#c3153f}body.color-blind{filter:grayscale(1)contrast(1.2)}body.large-font{font-size:1.1rem}body.reduce-motion *{transition:none !important;animation:none !important}body.theme-light{background-color:#f5f5f5;color:#0d2538}body.theme-light .nav-bar{background:linear-gradient(90deg,#f5f5f5,#e0e0e0,#f5f5f5);box-shadow:0 2px 4px rgba(0,0,0,0.2)}body.theme-light .nav-bar button{background:#d3d3d3;color:#0d2538}body.theme-light .nav-bar button.active{background:#a0c9f1}body.theme-light .list .entry{background:rgba(255,255,255,0.7);color:#0d2538}body.theme-light .list .entry:hover{background:rgba(0,0,0,0.05)}body.theme-light .card{background:rgba(255,255,255,0.8);color:#0d2538}body.theme-light .card-header{background:rgba(255,255,255,0.9);color:#0d2538}.floating-btn{position:fixed;bottom:10px;width:44px;height:44px;border-radius:50%;border:none;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;background:rgba(0,0,0,0.6);color:#fff;box-shadow:0 2px 6px rgba(0,0,0,0.3);z-index:1000}.floating-btn:hover{background:rgba(0,0,0,0.8)}.settings-icon{left:10px}.fullscreen-icon{right:10px}h3{margin-top:1rem}.card{background:rgba(0,0,0,0.6);border-radius:6px;margin-top:1rem;overflow:hidden}.header-with-toggle{display:flex;align-items:center;gap:0.25rem;margin-top:1rem;width:fit-content}.header-with-toggle h3{margin:0}.header-with-toggle .collapse-toggle{background:none;border:none;color:inherit;font-size:1.2rem;cursor:pointer;padding:0 0.25rem}.card-header{display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0.75rem;background:rgba(0,0,0,0.7);cursor:pointer}.card-body{padding:0.75rem}.collapse-toggle{background:none;border:none;color:inherit;font-size:1.2rem;cursor:pointer}.status-btn{background:#0f3d5f;color:#f5f5f5;border:none;padding:0.25rem 0.4rem;border-radius:4px;font-size:0.8rem;min-width:2rem;min-height:1.6rem;display:flex;align-items:center;justify-content:center;cursor:default}#ach-list .entry{display:flex !important;justify-content:space-between;align-items:center}#ach-list .entry > div{flex-grow:1;text-align:left}#ach-list .entry .status-btn{margin-left:0.5rem;padding:0.2rem 0.4rem;min-width:1.5rem;min-height:1.5rem;font-size:0.8rem}#quest-list .entry button,#bounty-list .entry button{padding:0.3rem 0.5rem;font-size:0.8rem}.status-btn:disabled{opacity:0.7}.bounty-in-progress{background:rgba(255,255,255,0.05)}.bounty-completed{background:rgba(255,215,0,0.10)}.bounty-claimed{background:rgba(0,255,0,0.10)}.info-icon{display:none !important}.info-icon:hover{color:#a0d4f5}.collapse-toggle:focus{outline:2px solid #88c6f2;outline-offset:2px}#codex-achievements.collapsed .card-body,#codex-lore.collapsed .card-body{display:none}#codex-achievements.collapsed .collapse-toggle,#codex-lore.collapsed .collapse-toggle{transform:rotate(180deg)}.stats-banner{position:static;top:auto;z-index:1;background:rgba(0,0,0,0.25);border-top:1px solid rgba(255,255,255,0.1);border-bottom:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(2px);overflow:visible;position:sticky;top:var(--nav-height,56px);z-index:9;background:rgba(0,0,0,0.25);border-top:1px solid rgba(255,255,255,0.1);border-bottom:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(2px);overflow:hidden}.stats-banner__text{padding:0.25rem 0.75rem;font-size:0.95rem;line-height:1.4;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:grid;grid-auto-flow:column;grid-auto-columns:max-content;grid-template-rows:repeat(3,auto);column-gap:1rem;row-gap:0.25rem;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:thin;overscroll-behavior-inline:contain;scroll-snap-type:x proximity}.stats-banner__track{display:none}.stats-banner__item{flex:0 0 auto}@keyframes stats-marquee{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}@media(prefers-reduced-motion:reduce){.stats-banner__track{display:none}}.list .entry{grid-template-columns:auto 1fr auto}.list .entry > .entry-icon{grid-column:1}.list .entry > button{grid-column:3;justify-self:end;align-self:center}.list .entry > div:not(.entry-icon){grid-column:2;min-width:0;text-align:left}.stats-banner__cell{min-width:max-content;display:inline-flex;align-items:center;gap:0.25rem;white-space:nowrap;scroll-snap-align:start}.stats-banner__cell .label{opacity:0.85}.stats-banner__cell .value{font-weight:700}#screen-sect{background-image:url('assets/sect_background.png');background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed;padding-bottom:2rem}.sect-card{background-color:rgba(0,0,0,0.6);padding:1.5rem;border-radius:8px;margin-top:1rem}#screen-sect h2,#screen-sect h3,#screen-sect p{color:#f5f5f5}.sect-switcher{display:flex;justify-content:flex-end;gap:0.5rem;margin-bottom:0.5rem}.sect-switcher button{background:rgba(255,255,255,0.1);border:none;border-radius:4px;padding:0.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;width:32px;height:32px}.sect-switcher button img{width:24px;height:24px}.sect-switcher button.active{background:rgba(255,255,255,0.3)}.sect-hall-buttons{position:absolute;right:1rem;top:calc(var(--nav-height,2.5rem)+ 3.5rem);display:flex;flex-direction:column;gap:0.5rem;z-index:20}.hall-btn{background:rgba(255,255,255,0.15);border:none;border-radius:6px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background 0.3s ease}.hall-btn img{width:28px;height:28px;filter:invert(1)}.hall-btn.active{background:rgba(255,255,255,0.35)}.party-panel{margin:8px 0;padding:8px;border:1px solid var(--fg-muted);border-radius:6px}.party-panel h4{margin:0 0 6px}.party-list{display:flex;flex-direction:column;gap:4px}.party-item{display:flex;align-items:center;gap:8px}.s1-roi{margin-left:8px;font-size:12px;opacity:.85}.s1-max{margin-left:8px;padding:2px 6px;font-size:12px;cursor:pointer}#qi-breakdown-panel.s1-breakdown{display:none}.s1-bd-head{font-size:14px;margin-bottom:6px}.s1-bd-row{display:grid;grid-template-columns:1fr auto;gap:8px;font-size:13px}.s1-bell{position:fixed;right:16px;bottom:16px;width:42px;height:42px;border-radius:21px;border:none;box-shadow:0 2px 8px rgba(0,0,0,.25);font-size:20px;cursor:pointer;z-index:9999}.s1-bell.s1-has::after{content:attr(data-count);position:absolute;top:-6px;right:-6px;min-width:18px;height:18px;padding:0 4px;border-radius:9px;background:#e53935;color:#fff;font-size:12px;display:flex;align-items:center;justify-content:center}.s1-drawer{position:fixed;right:12px;bottom:70px;width:360px;max-height:60vh;background:rgba(20,20,25,.98);color:#eaeaea;border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,.35);display:none;flex-direction:column;overflow:hidden;z-index:9998}.s1-drawer.open{display:flex}.s1-drawer-head{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;font-weight:600;background:rgba(255,255,255,.06)}.s1-events{overflow:auto;padding:8px 12px}.s1-event{padding:6px 0;border-bottom:1px dashed rgba(255,255,255,.12)}.s1-event:last-child{border-bottom:none}.s1-row{display:flex;gap:8px;font-size:12px;opacity:.85}.s1-type{margin-left:auto}.s1-party{margin-top:6px;padding:6px;border:1px solid rgba(255,255,255,.1);border-radius:6px}.s1-party-title{font-weight:600;margin-bottom:4px}.btn-secondary{background:rgba(255,255,255,0.1);color:#e6f0ff;border:1px solid rgba(255,255,255,0.25);padding:0.5rem 0.75rem;border-radius:6px;cursor:pointer}.btn-secondary:hover{filter:brightness(1.1)}.mission-card .actions{display:flex;justify-content:flex-end;margin:0.25rem 0 0.5rem 0}.sect-hall-buttons.grid{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;margin:1rem auto;max-width:320px}.sect-hall-buttons.grid .hall-item{display:flex;flex-direction:column;align-items:center;text-align:center;color:#eaeaea}.sect-hall-buttons.grid .hall-btn{background:rgba(255,255,255,0.2);border:none;border-radius:50%;width:64px;height:64px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background 0.3s ease}.sect-hall-buttons.grid .hall-btn:hover{background:rgba(255,255,255,0.35)}.sect-hall-buttons.grid .hall-btn img{width:40px;height:40px;filter:invert(1)}.sect-hall-buttons.grid .hall-label{margin-top:0.4rem;font-size:0.9rem}.trait-info{margin-left:4px;cursor:help;font-weight:bold;font-size:0.8em;color:#88c6f2}.trait-info:hover{color:#b5d6f6}.new-feature{margin-left:4px;color:#ffde59;font-weight:bold;font-size:0.8em}.exp-toggle{background:none;border:none;color:#88c6f2;cursor:pointer;margin-left:0.5rem;font-size:1rem;line-height:1;padding:0}.exp-toggle:hover{color:#b5d6f6}.exp-details{margin-left:0.5rem;margin-top:0.25rem;font-size:0.8rem;color:#cbd5e1}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:1000}.modal.hidden{display:none}.modal .modal-content{background:#ffffff;color:#000000;padding:1rem 1.5rem;border-radius:8px;min-width:280px;max-width:90%;box-shadow:0 2px 8px rgba(0,0,0,0.3)}.modal .modal-content h2{margin-top:0;font-size:1.2rem;color:#333333}.modal .modal-content select{width:100%;margin-top:0.5rem;padding:0.25rem;font-size:1rem}.modal .modal-content button{width:100%;margin-top:0.75rem;padding:0.5rem;font-size:1rem;border:none;border-radius:4px;background:#136eb8;color:#ffffff;cursor:pointer}.modal .modal-content button:hover{background:#195fa5}